<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>github-project-scrapper</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!--font awesome-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<!--font awseome end-->
</head>
<style>
  .ms-n5 {
    margin-left: -40px;
}
</style>
<body>
  <!--NAVBAR START-->
  <nav class="navbar navbar-expand-lg bg-body-tertiary navbar bg-dark" data-bs-theme="dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Github Project Scrapper</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
          </li>
        </ul>
        <a type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@getbootstrap"><i class="fas fa-iphone"></i> Contact Me</a>
      </div>
    </div>
  </nav>


  <!--NAVBAR END-->

      <!-- Video Modal Start -->
      <div class="modal fade" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>        
                    <!-- 16:9 aspect ratio -->
                    <div class="embed-responsive embed-responsive-16by9">
                        <iframe class="embed-responsive-item" src="" id="video"  allowscriptaccess="always" allow="autoplay"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Video Modal End -->

  <!--search input-->

  <div class="container shadow min-vh-100 py-4">
    <div class="row">
        <div class="col-md-5 mx-auto">
            <div class="input-group">
                <input class="form-control border-end-0 border rounded-pill" type="search" value="" id="example-search-input" placeholder="Enter Keyword to Search" onkeydown="handleSearch(event)" required>
                <span class="input-group-append">
                    <button class="btn btn-outline-secondary bg-white border-bottom-0 border rounded-pill ms-n5" type="button" onclick="searchRepositories()">
                        <i class="fa fa-search"></i>
                    </button>
                </span>
            </div>
            <div class="d-flex justify-content-center mt-3">
                <button class="btn btn-primary" onclick="searchRepositories()">Search</button>
            </div>
        </div>
    </div>
</div>


<!---CONTACT MODEL -->

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Contact   </h1> &nbsp;&nbsp;&nbsp;
        <div id="submitting-form-spinner" style="display: none;">Submitting form &nbsp;<i class="fas fa-sync fa-spin"></i></div>
        <div id="response-message-box" class="" style="display: none;">
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          <div id="success"></div>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form name="sendMessage" id="contactForm" novalidate="novalidate">
          <div class="mb-3">
            <input type="text" class="form-control" id="name" placeholder="Your Name" required>
          </div>
          <div class="mb-3">
            <input type="text" class="form-control" id="email" placeholder="Your Email" required>
          </div>
          <div class="mb-3">
            <input type="text" class="form-control" id="subject" placeholder="Subject" required>
          </div>
          <div class="mb-3">
              <textarea class="form-control" rows="5" id="message" placeholder="Message"
                                    required="required"
                                    data-validation-required-message="Please enter your message"></textarea>
          </div>
          <div class="control-group">
            <select class="form-control form-control-sm" id="role" required="required" data-validation-required-message="Please select your role">
              <option value="" disabled selected>Your Role</option>
              <option value="Developer">Developer</option>
              <option value="HR">HR</option>
              <option value="Student">Student</option>
              <option value="Manager">Manager</option>
              <option value="Manager">Client</option>
              <option value="Others">Others</option>
            </select>
            <p class="help-block text-danger"></p>
          </div>
        </div>
        <div class="modal-footer">
         
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" id="sendMessageButton">Send Message</button>
        </div>
      </form>
    </div>
  </div>
</div>
<!--CONTACT MODEL END-->

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    function searchRepositories() {
      console.log('saerch called')
        // Get the input value
        const searchKeyword = $("#example-search-input").val();
        console.log("keyword to serach "+searchKeyword)
        var base_url = '{{ base_url }}';
        // Send an AJAX request to the backend with the search keyword
        $.ajax({
            type: "POST",
            url: base_url + 'scrap',
            // contentType: "application/json",
            dataType: "json",
            data: {keyword: searchKeyword},
            success: function (response) {
                // Handle the response from the backend
                console.log(response);
            },
            error: function (error) {
                console.error("Error:", error);
            }
        });
    }

    function validateEmail(email) {
            // Regular expression for email validation
            var regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return regex.test(email);
        }

    function handleSearch(event) {
      console.log("Enter keyword presed");
        if (event.key === "Enter") {
            // Prevent the default form submission behavior
            event.preventDefault();

            // Trigger the searchRepositories function
            searchRepositories();
        }
    }
</script>


<script>
  $(document).ready(function() {
    $('#contactForm').submit(function(event) {
      console.log('button clicked');
      event.preventDefault();
      
      $("#submitting-form-spinner").show();
      
      var name = $('#name').val();
      var email = $('#email').val();
      var subject = $('#subject').val();
      var message = $('#message').val();
      var role = $('#role').val();
      console.log(role);


      // Perform field validation
      if (name === '' || email === '' || subject === '' || message === '' || role === '') {
        // Display error message if any field is empty
        $("#submitting-form-spinner").hide();
        $("#response-message-box").show();
        $("#response-message-box").addClass("alert alert-dismissible alert-danger");

        $('#success').text('All fields are required.');
        $('#success').removeClass('success-message');
        $('#success').addClass('error-message'); // Apply error class to the success message element
        return;
      }
      if (!validateEmail(email)) {
        $("#submitting-form-spinner").hide();
        $("#response-message-box").show();
        $("#response-message-box").addClass("alert alert-dismissible alert-danger");

        $('#success').text('Enter a valid email address!');
        $('#success').removeClass('success-message');
        $('#success').addClass('error-message'); // Apply error class to the success message element
        console.log('email validation failed');
        return;
      }
      var base_url = '{{ base_url }}';  // Add this line
      console.log('base_url' + base_url);

      // Make an AJAX POST request to the backend endpoint
      $.ajax({
        type: 'POST',
        url: base_url + 'message',
        data: {
          name: name,
          email: email,
          subject: subject,
          role: role,
          message_body: message
        },
        dataType: "json",
        success: function(response) {
          // Display success message
          $("#submitting-form-spinner").hide();
        $("#response-message-box").show();

          $("#response-message-box").addClass("alert alert-dismissible alert-success");

          console.log('response is ' + response);
          $('#success').text('Message sent!');
          $('#success').removeClass('error-message');
          $('#success').addClass('success-message'); // Apply success class to the success message element
        },
        error: function(error) {
          console.log('error is ' + error);
          // Display error message
          $("#submitting-form-spinner").hide();
        $("#response-message-box").show();
        $("#response-message-box").addClass("alert alert-dismissible alert-danger");
         
          $('#success').text('Error sending message.Retry! Or Send Your message at:surajpisal113@gmail.com');
          $('#success').removeClass('success-message');
          $('#success').addClass('error-message'); // Apply error class to the success message element
        }
      });
    });
  });
</script>



  <!--serach input end-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
</body>

</html>