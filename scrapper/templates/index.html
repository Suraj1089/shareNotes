<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>github-project-scrapper</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!--font awesome-->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
    integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
  <!--font awseome end-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.css">
  <script src="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>
<style>
  /* Add your custom styles here */
  body {
    font-family: Arial, sans-serif;
  }

  .container {
    padding-top: 20px;
  }

  .navbar-brand {
    font-size: 24px;
    font-weight: bold;
  }

  .navbar-toggler-icon {
    background-color: rgb(0, 0, 0);
  }

  .form-control {
    border-radius: 30px;
  }

  .input-group-append button {
    border-radius: 30px;
  }

  .btn-primary {
    border-radius: 30px;
    padding: 10px 30px;
  }

  .pagination {
    justify-content: center;
    margin-top: 20px;
  }

  .tableDiv {
    overflow-x: auto;
    margin-top: 20px;
    overflow: scroll;
    display: none;

  }

  table {
    margin: 0 auto;
    background-color: #f2f2f2;
  }



  th,
  td {
    border: 1px solid #ddd;
    padding: 8px;
  }

  /** adust table width automatic based on device */


  .badge.bg-info {
    cursor: pointer;
  }

  .modal-content {
    border-radius: 20px;
  }

  .modal-header h1 {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 0;
  }


  #response-message-box {
    display: none;
    margin-top: 20px;
  }

  #success {
    font-weight: bold;
  }

  .user-model {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.4);
  }

  .modal-content-user {
    margin: 10% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 30%;
    background-color: #fefefe;
    border-radius: 20px;
  }

  /* Adjust width for smaller devices */
  @media (max-width: 768px) {
    .modal-content-user {
      width: 80%;
    }
  }

  /* Adjust width for even smaller devices */
  @media (max-width: 480px) {
    .modal-content-user {
      width: 90%;
    }
  }


  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }

  @media (min-width: 768px) {
    .text-large {
      font-size: 16px;
    }
  }

  /* CSS for the overlay */
  #toastContainer {
    position: fixed;
    bottom: 0;
    right: 0;
    margin: 20px;
    z-index: 9999;
    display: none;
  }

  /* CSS for the push animation */
  @keyframes pushInFromRight {
    0% {
      transform: translateX(100%);
    }

    100% {
      transform: translateX(0);
    }
  }

  /* Apply the animation to the toast */
  .toast.show {
    animation: pushInFromRight 0.5s forwards;
  }

  /* * style for user info */

  .button-container {
    position: relative;
  }

  .user-info {
    position: relative;
    top: 0;
    right: -200px;
    /* Adjust the value as per your layout */
    width: 200px;
    /* Adjust the width as per your preference */
    background-color: #f1f1f1;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }


  .user-modal {
    display: none;
    position: relative;
    z-index: 1;
    left: 0;
    top: 0;
    width: 10px;
    height: 40px;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.4);
  }



  #user-info {
    color: black !important;
  }


  .user-info-field {
    margin-bottom: 10px;
  }

  .user-info-field label {
    font-weight: bold;
  }

  .user-info-field span {
    margin-left: 5px;
  }

  .user-info-field img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
  }

  /** style for multiple select */
  .mt-100 {
    margin-top: 100px
  }
</style>

<body>
  <!--NAVBAR START-->
  <nav class="navbar navbar-expand-lg bg-body-tertiary navbar bg-dark" data-bs-theme="dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Github Project Scrapper</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
          </li>
        </ul>
        <button id="project-recommend" type="button" class="btn btn-info" data-bs-toggle="modal"
          data-bs-target="#project-suggestion" data-bs-whatever="@getbootstrap" style="display: none;"> Recommend
          Projects</button> &nbsp;

        <button id="login-button-nav" type="button" class="btn btn-success" data-bs-toggle="modal"
          data-bs-target="#loginModal" data-bs-whatever="@getbootstrap">Login</button>
        &nbsp;
        <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#exampleModal"
          data-bs-whatever="@getbootstrap"><i class="fas fa-phone"></i> Contact Me</button> &nbsp;
      </div>
    </div>
  </nav>

  <!--NAVBAR END-->
  <!--other project see notification-->
  <div id="toastContainer" class="position-fixed bottom-0 end-0 p-3">
    <div id="toast" class="toast show" role="alert" aria-live="assertive" aria-atomic="true"
      style="background: radial-gradient(circle, #f7efff, #f3f3f3);">

      <div class="toast-header">
        <strong class="me-auto">See Other Projects</strong>
        <button id="project-suggestion-button" type="button" class="btn-close ms-2 mb-1" data-bs-dismiss="toast"
          aria-label="Close">
          <span aria-hidden="true"></span>
        </button>
      </div>
      <div class="toast-body">
        <button type="button" class="btn btn-success btn btn-secondary btn-lg btn-block" data-bs-toggle="modal"
          data-bs-target="#project-suggestion">Get Project Suggesstion</button>
      </div>
    </div>
  </div>
  <style>
    .alert-fullscreen {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: auto;
      z-index: 9999;
      width: 300px; /* Adjust this value as per your needs */
      height: 70px;
      margin-top: 70px;
      padding: 20px;
      box-sizing: border-box;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }
  
    .alert-fullscreen .btn-close {
      position: absolute;
      top: 10px;
      right: 10px;
    }
  </style>
  
  <div id="search-response" class="alert alert-dismissible alert-danger alert-fullscreen">
    <!-- <strong id="search-response">Error</strong>  -->
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  
 
  <!--other project see notification end-->
  <!-- Video Modal Start -->
  <div class="modal fade" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <!-- 16:9 aspect ratio -->
          <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" src="" id="video" allowscriptaccess="always"
              allow="autoplay"></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Video Modal End -->
  <!--search input-->
  <div class="container1 py-4 min-vh-100 ">
    <div class="row">
      <div class="col-md-5 mx-auto">
        <div id="search-response" class="alert alert-dismissible alert-success" style="display: none;">
          <!-- <button type="button" class="btn-close" data-bs-dismiss="alert"></button> -->
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          <div id="search-response-spin"></div> <i id="spinner-icon" class="fas fa-sync fa-spin"></i>
          <!-- <strong id="search-response-text"></strong> -->
        </div>
        <div class="input-group">
          <input class="form-control border-end-0 border rounded-pill" type="search" value="" id="example-search-input"
            placeholder="Enter Keyword to Search" onkeydown="handleSearch(event)" required>
          <span class="input-group-append">
            <button class="btn btn-outline-secondary bg-white border-bottom-0 border rounded-pill ms-n5" type="button"
              onclick="searchRepositories()">
              <i class="fa fa-search"></i>
            </button>
          </span>
        </div>
        <div class="d-flex justify-content-center mt-3">
          <button class="btn btn-primary" onclick="searchRepositories(1)">Search</button>
        </div>
        <br>
        <div id="pagination-div" style="display: none;">
          <ul class="pagination">
            <li class="page-item disabled">
              <a class="page-link" href="#">&laquo;</a>
            </li>
            <li class="page-item active">
              <a class="page-link" href="#" onclick="searchRepositories(1)">1</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="#" onclick="searchRepositories(2)">2</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="#" onclick="searchRepositories(3)">3</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="#" onclick="searchRepositories(4)">4</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="#" onclick="searchRepositories(5)">5</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="#">&raquo;</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="tableDiv">

      <table class="table  table-hover" id="table-body" width:"100vw">

      </table>
    </div>

  </div>
  <!---CONTACT MODEL -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Contact </h1> &nbsp;&nbsp;&nbsp;
          <div id="submitting-form-spinner" style="display: none;">Submitting form &nbsp;
            <i class="fas fa-sync fa-spin"></i>
          </div>
          <div id="response-message-box" class="" style="display: none;">
            <!-- <button type="button" class="btn-close" data-bs-dismiss="alert"></button> -->
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            <div id="success"></div>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

        </div>
        <div class="modal-body">
          <form name="sendMessage" id="contactForm" novalidate="novalidate">
            <div class="mb-3">
              <input type="text" class="form-control" id="name" placeholder="Your Name" required>
            </div>
            <div class="mb-3">
              <input type="text" class="form-control" id="email" placeholder="Your Email" required>
            </div>
            <div class="mb-3">
              <input type="text" class="form-control" id="subject" placeholder="Subject" required>
            </div>
            <div class="mb-3">
              <textarea class="form-control" rows="5" id="message" placeholder="Message" required="required"
                data-validation-required-message="Please enter your message"></textarea>
            </div>
            <div class="control-group">
              <select class="form-control form-control-sm" id="role" required="required"
                data-validation-required-message="Please select your role">
                <option value="" disabled selected>Your Role</option>
                <option value="Developer">Developer</option>
                <option value="HR">HR</option>
                <option value="Student">Student</option>
                <option value="Manager">Manager</option>
                <option value="Manager">Client</option>
                <option value="Others">Others</option>
              </select>
              <p class="help-block text-danger"></p>
            </div>
        </div>
        <div class="modal-footer">

          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" id="sendMessageButton">Send Message</button>
        </div>
        </form>
      </div>
    </div>
  </div>
  <!--CONTACT MODEL END-->
  <!--REadme show model-->
  <div id="show-readme" class="modal">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Readme</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div id="show-readme-body" class="modal-body">
          <!-- Modal body content -->
        </div>
        <div class="modal-footer">
          <button id="download-project" type="button" class="btn btn-primary">Download Project</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!--REadme show model end-->
  <!--user details show model-->
  <div id="user-modal" class="modal user-model">
    <div class="modal-content-user">
      <span class="close" onclick="hideModal()">&times;</span>
      <div id="user-info"></div>
    </div>
  </div>
  <!-- hide user details model-->
  <!--get project suggesstion model-->
  <div id="project-suggestion" class="modal">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Project suggestion</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"></span>
          </button>
        </div>

        <!-- Form to take input -->
        <div class="row d-flex justify-content-center mt-100">
          <div class="col-md-6">
            <select id="choices-multiple-remove-button" placeholder="Select up to 5 tags" multiple>
              <option value="HTML">HTML</option>
              <option value="Jquery">Jquery</option>
              <option value="CSS">CSS</option>
              <option value="Bootstrap 4">Bootstrap 4</option>
              <option value="Java">Java</option>
              <option value="Javascript">Javascript</option>
              <option value="Angular">Angular</option>
              <option value="Python">Python</option>
              <option value="Hybris">Hybris</option>
              <option value="SQL">SQL</option>
              <option value="NOSQL">NOSQL</option>
              <option value="NodeJS">NodeJS</option>
              <option value="React">React</option>
              <option value="Vue.js">Vue.js</option>
              <option value="PHP">PHP</option>
              <option value="Ruby">Ruby</option>
              <option value="C#">C#</option>
              <option value="ASP.NET">ASP.NET</option>
              <option value="MongoDB">MongoDB</option>
              <option value="Redis">Redis</option>
              <option value="Docker">Docker</option>
              <option value="Git">Git</option>
              <option value="Swift">Swift</option>
              <option value="Kotlin">Kotlin</option>
              <option value="C++">C++</option>
              <option value="R">R</option>
              <option value="Scala">Scala</option>
              <option value="TensorFlow">TensorFlow</option>
              <option value="PyTorch">PyTorch</option>
              <option value="AWS">AWS</option>
              <option value="Azure">Azure</option>
              <option value="Google Cloud">Google Cloud</option>
              <option value="Firebase">Firebase</option>
              <option value="GraphQL">GraphQL</option>
              <option value="Kubernates">Kubernates</option>
              <option value="FastAPI">FastAPI</option>
              <option value="Django">Django</option>
              <option value="Django">Django</option>

            </select>
            <!-- <div class="col-md-6"> -->
            <select id="experience-select">
              <option value="1">1 Year</option>
              <option value="2">2 Years</option>
              <option value="3">3 Years</option>
              <option value="4">4 Years</option>
              <option value="5+">More than 4 Years</option>
            </select>
            <!-- </div> -->
          </div>
        </div>

        <!--suggested projects-->
        <div id="suggested-projects" class="suggested-projects"></div>
        <div class="modal-footer">
          <button id="suggestion-button" type="button" class="btn btn-primary">Suggest</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!--login model -->
  <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModal" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="loginModalTitle">Login</h1>&nbsp;&nbsp;&nbsp;

          <div id="response-message-box" class="alert alert-dismissible alert-success" style="display: none;">
            <!-- <button type="button" class="btn-close" data-bs-dismiss="alert"></button> -->
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            <div id="success"></div>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div id="modal-body-login" class="modal-body">
          <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="login-tab" data-bs-toggle="pill" data-bs-target="#login" type="button"
                role="tab" aria-controls="login" aria-selected="true">Login</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="signup-tab" data-bs-toggle="pill" data-bs-target="#signup" type="button"
                role="tab" aria-controls="signup" aria-selected="false">Signup</button>
            </li>
          </ul>
          <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
              <form name="loginForm" id="loginForm" novalidate="novalidate">
                <div class="mb-3">
                  <input type="text" class="form-control" id="loginEmail" placeholder="Your Email" required>
                </div>
                <div class="mb-3">
                  <input type="password" class="form-control" id="loginPassword" placeholder="Password" required>
                </div>
                <div class="mb-3">
                  <button id="loginbutton" type="submit" class="btn btn-success" id="signInButton">Login</button>
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </form>
            </div>

            <div class="tab-pane fade" id="signup" role="tabpanel" aria-labelledby="signup-tab">
              <form name="signupForm" id="signupForm" novalidate="novalidate">
                <div class="mb-3">
                  <input type="text" class="form-control" id="signupName" placeholder="Your Name" required>
                </div>
                <div class="mb-3">
                  <input type="text" class="form-control" id="signupEmail" placeholder="Your Email" required>
                </div>
                <div class="mb-3">
                  <input type="password" class="form-control" id="signupPassword" placeholder="Password" required>
                </div>
                <div class="mb-3">
                  <input type="password" class="form-control" id="signupConfirmPassword" placeholder="Confirm Password"
                    required>
                </div>
                <div class="mb-3">
                  <button type="submit" class="btn btn-success" id="signupButton">SignUp</button>
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>

              </form>
            </div>
          </div>

        </div>

        </form>
      </div>
    </div>
  </div>
  <!--login model end-->
  <!--end of project suggesstion model-->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
  <script>
    // at time to load page check if token is present in local storage
    // if present then get User Name and set login button text to user name
    // else set login button text to login
    function updateModalContent(response) {
      $("#exampleModalLabel").text("Welcome, " + response.email);
      // loginModalTitle
      $("#loginModalTitle").text("Welcome, " + response.email);
      $("#modal-body-login").html(`
      <div class="user-info-field">
        <label>Name:</label>
        <span>${response.name}</span>
      </div>
      <div class="user-info-field">
        <label>Email:</label>
        <span>${response.email}</span>
      </div>
      <div class="user-info-field">
        <button type="button" class="btn btn-danger" id="logoutButton">Logout</button>
      </div>
    `);
    }
    function updateDom(token) {

      $(document).ready(function () {

        if (token) {
          // User is logged in
          $.ajax({
            type: "GET",
            url: "https://auth-githubprojectscrapper.onrender.com/auth/user",
            // url: "http://localhost:8000/auth/user",
            dataType: "json",
            contentType: "application/json",
            headers: {
              Authorization: "Bearer " + token
            },
            success: function (response) {
              // Handle successful login
              console.log("auth success ", response);
              $("#login-button-nav").text(response.email);
              updateModalContent(response);
              // project-recommend
              $("#project-recommend").css("display", "block");
            },
            error: function (error) {
              // Handle login error
              console.log("auth error ", error);
              // alert alert-dismissible alert-danger alert-fullscreen
              showSearchResponseNotification("alert alert-dismissible alert-success alert-fullscreen", "alert alert-dismissible alert-danger alert-fullscreen", "Signature is expired.Login to get more features", false);
            }
          });
        } else {
          showSearchResponseNotification("alert alert-dismissible alert-success alert-fullscreen", "alert alert-dismissible alert-danger alert-fullscreen", "Signature is expired.Login to get more features", false);

        }


        // Handle logout button click
        $(document).on("click", "#logoutButton", function () {
          // Perform logout logic
          // Clear token and redirect to login page
          localStorage.removeItem("token");
          // reload the page
          // reload page 
          location.reload();

        });
      });
    }
    const token = localStorage.getItem("token");
    console.log('token form storage ',token);
    updateDom(token);

    function showSearchResponseNotification(intialClass, finalClass, message, isHide) {
      $("#search-response").removeClass(intialClass).addClass(finalClass).show();
      $("#search-response").text(message);
        $("#search-response").fadeTo(2000, 500).slideUp(500, function () {
          $("#search-response").slideUp(500);
        });
    }

    function showSuccessNotification(initialClass, finalClass, message, isHide) {
      $("#response-message-box").removeClass(initialClass).addClass(finalClass).show();
      $("#response-message-box").text(message);
      if (isHide) {
        $("#response-message-box").hide();
      } else {
        $("#response-message-box").fadeTo(2000, 500).slideUp(500, function () {
          $("#response-message-box").slideUp(500);
        });
      }
    }

    function responseMessageNotification(initialClass, finalClass, message, isHide) {
      $("#response-message-box").removeClass(initialClass).addClass(finalClass).show();
      $("#response-message-box").text(message);
      if (isHide) {
        $("#response-message-box").hide();
      } else {
        $("#response-message-box").fadeTo(2000, 500).slideUp(500, function () {
          $("#response-message-box").slideUp(500);
        });
      }
    }
  </script>
  <!--LOGIN AND SINGUP-->
  <script>
    $(document).ready(function () {
      // Login form submission
      $("#loginForm").submit(function (event) {
        event.preventDefault(); // Prevent form submission

        const email = $("#loginEmail").val();
        const password = $("#loginPassword").val();
        // check empty fields
        if (email === "" || password === "") {
          console.log("Empty fields!");
          showSearchResponseNotification("alert alert-dismissible alert-success alert-fullscreen", "alert alert-dismissible alert-danger alert-fullscreen", "All fields are required!", false);
          return;
        }
        // console.log('auth url in login ', auth_url + 'auth/login');
        // Send login request
        $.ajax({
          type: "POST",
          url: "https://auth-githubprojectscrapper.onrender.com/auth/login",
          // url: "http://localhost:8000/auth/login",
          dataType: "json",
          contentType: "application/json",
          data: JSON.stringify({
            email: email,
            password: password
          }),
          success: function (response) {
            // Handle successful login
            // save the token in local storage
            console.log(response);
            localStorage.setItem("token", response.access_token);

            showSearchResponseNotification("alert alert-dismissible alert-success alert-fullscreen", "alert alert-dismissible alert-danger alert-fullscreen", "Successfully logged in! as " + email, false);
            // close the modal
            $("#loginModal").modal("hide");
            // login-button-nav bet button and set text to logout
            $("#login-button-nav").text(email);
            const token = localStorage.getItem("token");
            updateDom(token);
            $("#project-recommend").css("display", "block");
          },
          error: function (error) {
            // Handle login error
            console.log(error);

            showSearchResponseNotification("alert alert-dismissible alert-success alert-fullscreen", "alert alert-dismissible alert-danger alert-fullscreen", "Invalid credentials", false);

          }
        });
      })

      // Signup form submission
      $("#signupForm").submit(function (event) {
        event.preventDefault(); // Prevent form submission

        const name = $("#signupName").val();
        const email = $("#signupEmail").val();
        const password = $("#signupPassword").val();
        const confirmPassword = $("#signupConfirmPassword").val();
        if (password !== confirmPassword) {
          console.log("Passwords do not match!");

          showSearchResponseNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", "Password Not matched!", false);
          return;
        }
        // check empty fields
        if (name === "" || email === "" || password === "" || confirmPassword === "") {
          console.log("Empty fields!");

          showSearchResponseNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", "All fields are required!", false);
          return;
        }

        // check valid email
        // validateEmail()
        if (!validateEmail(email)) {
          console.log("Invalid email!");

          showSearchResponseNotification("alert alert-dismissible alert-success alert-fullscreen", "alert alert-dismissible alert-danger alert-fullscreen", "Invalid email!", false);
          return;
        }


        // Send signup request
        $.ajax({
          type: "POST",
          url: "https://auth-githubprojectscrapper.onrender.com/auth/register",
          // url: "http://localhost:8000/auth/register",
          dataType: "json",
          contentType: "application/json",
          data: JSON.stringify({
            name: name,
            email: email,
            password: password,
          }),
          success: function (response) {
            // Handle successful signup
            console.log(response);

            showSearchResponseNotification("alert alert-dismissible alert-danger alert-fullscreen", "alert alert-dismissible alert-success alert-fullscreen", "Signed up successfully!", false);
            $("#loginModal").modal("hide");
          },
          error: function (error) {
            // Handle signup error
            console.log(error);

            showSearchResponseNotification("alert alert-dismissible alert-success alert-fullscreen", "alert alert-dismissible alert-danger alert-fullscreen", error.responseJSON.details?error.responseJSON.detail: "Error in registering",false);
          }
        });
      });
    });
  </script>
  <script>
    $(document).ready(function () {
      var multipleCancelButton = new Choices('#choices-multiple-remove-button', {
        removeItemButton: true,
        maxItemCount: 5,
        searchResultLimit: 5,
        renderChoiceLimit: 5
      });

      $("#suggestion-button").click(function () {
        showSearchResponseNotification("alert alert-dismissible alert-danger alert-fullscreen", "alert alert-dismissible alert-danger alert-fullscreen", "Searching.....!", true);
        var tags = multipleCancelButton.getValue(true);

        const expertise = $("#experience-select").val();
        const skills = tags.join(',');
        data = { expertise: expertise, skills: skills };

        $.ajax({
          type: "POST",
          url: 'https://recommender-githubprojectscrapper.onrender.com/recommend',
          // url: 'http://localhost:8001/recommend',
          dataType: "json",
          data: data,
          success: function (response) {

            showSearchResponseNotification("alert alert-dismissible alert-danger alert-fullscreen", "alert alert-dismissible alert-success alert-fullscreen", "Found some result!", true);

            console.log("Response:", response);
            var suggestedProjects = document.getElementById("suggested-projects");
            // var markdownContent = "Sure, here are 6 to 9 Python projects that would challenge you and allow you to further enhance your skills:\n\n1. **Build a web application using FastAPI and SQL.** This project will allow you to use your skills in Python, FastAPI, and SQL to create a fully functional web application. You can use this project to learn how to create APIs, store data in a database, and build a user interface.\n2. **Create a data pipeline using AWS.** This project will allow you to use your skills in Python, AWS, and SQL to create a data pipeline that can be used to collect, store, and analyze data. You can use this project to learn how to use AWS services such as S3, RDS, and Redshift to store and process data.\n3. **Build a machine learning model using Python.** This project will allow you to use your skills in Python and machine learning to build a model that can be used to make predictions. You can use this project to learn how to collect data, train a model, and evaluate the performance of a model.\n4. **Create a game using Python.** This project will allow you to use your skills in Python, graphics, and game development to create a fun and engaging game. You can use this project to learn how to create graphics, handle user input, and implement game mechanics.\n5. **Build a website using Python and Django.** This project will allow you to use your skills in Python, Django, and HTML/CSS to create a fully functional website. You can use this project to learn how to create a user interface, handle user input, and store data in a database.\n6. **Create a chatbot using Python and Rasa.** This project will allow you to use your skills in Python, Rasa, and natural language processing to create a chatbot that can be used to interact with users. You can use this project to learn how to build a conversational AI agent, handle user input, and generate responses.\n7. **Build a web scraping application using Python and BeautifulSoup.** This project will allow you to use your skills in Python, BeautifulSoup, and web scraping to extract data from websites. You can use this project to learn how to find and extract data from websites, and how to store the data in a database.\n8. **Create a data visualization using Python and Matplotlib.** This project will allow you to use your skills in Python, Matplotlib, and data visualization to create a visually appealing and informative data visualization. You can use this project to learn how to plot data, add labels and annotations, and customize the appearance of a plot.\n9. **Build a natural language processing application using Python and spaCy.** This project will allow you to use your skills in Python, spaCy, and natural language processing to create an application that can be used to process and understand human language. You can use this project to learn how to tokenize text, identify named entities, and classify text.\n\nThese are just a few ideas for Python projects that you can work on to challenge yourself and further enhance your skills. There are many other possibilities, so feel free to explore and find projects that interest you.";
            var markdownContent = response["projects"];
            var htmlContent = marked.parse(markdownContent);
            $("#suggested-projects").html(htmlContent);
          },
          error: function (error) {

            showSearchResponseNotification("alert alert-dismissible alert-success alert-fullscreen", "alert alert-dismissible alert-danger alert-fullscreen", error.responseJSON.details?error.responseJSON.detail:"Error in suggesting", false);
            console.error("Error:", error);
          }
        });
      });


    });
  </script>

  <script>
    function validateEmail(email) {
      // Regular expression for email validation
      var regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return regex.test(email);
    }
    function handleSearch(event) {
      if (event.key === "Enter") {
        // Prevent the default form submission behavior
        event.preventDefault();

        // Trigger the searchRepositories function
        searchRepositories();
      }
    }

    function removeChinese(htmlString) {
      // Create a regular expression to match Chinese characters
      var chineseRegex = /[^\x00-\x7F\x80-\xFF]/g;

      // Replace all Chinese characters with an empty string
      return htmlString.replace(chineseRegex, "");
    }

    function downloadProject(readmeLink) {


      var downloadLink = readmeLink.replace("blob", "archive/refs/heads");
      downloadLink = downloadLink.replace("README.md", "main.zip");

      window.open(downloadLink, "_blank");
    }
  </script>
  <!--contact form -->
  <script>
    $(document).ready(function () {
      $('#contactForm').submit(function (event) {
        event.preventDefault();


        var name = $('#name').val();
        var email = $('#email').val();
        var subject = $('#subject').val();
        var message = $('#message').val();
        var role = $('#role').val();
        // Perform field validation
        if (name === '' || email === '' || subject === '' || message === '' || role === '') {

          responseMessageNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", "All fields are required.", false);

          showSuccessNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", "All fields are required.", false);
          return;
        }
        if (!validateEmail(email)) {
          showSuccessNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", "Enter a valid email address!", false);
          return;
        }
        // Make an AJAX POST request to the backend endpoint
        $.ajax({
          type: 'POST',
          url: '/message',
          data: {
            name: name,
            email: email,
            subject: subject,
            role: role,
            message_body: message
          },
          dataType: "json",
          success: function (response) {

            showSuccessNotification("alert alert-dismissible alert-danger", "alert alert-dismissible alert-success", "Message sent!", false);
          },
          error: function (error) {
            showSuccessNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", error.responseJSON.details?error.responseJSON.detail:"Error sending message.Retry! Or Send Your message at: surajpisal113@gmail.com");
          }
        });
      });
    });
  </script>
  <!--contact form end-->
  <script>

    function searchRepositories(pageNumber) {
      $("#toastContainer").hide();
      // if table is already filled with data, empty it
      // remove all the rows
      $("#search-response").show();
      // $("#table-body").empty();
      $("#table-body").empty();

      // Get the input value
      const searchKeyword = $("#example-search-input").val();
      $("#search-response").text("Generating result for " + searchKeyword);
      if (pageNumber == null) {
        pageNumber = 1;
      }

      // Send an AJAX request to the backend with the search keyword
      $.ajax({
        type: "POST",
        url: '/scrap',
        dataType: "html",
        data: { keyword: searchKeyword, pageNumber: pageNumber },
        success: function (response) {
         
          // search-response-spin hides the spinner
          $("#search-response").hide();
          if (1 == !animateRows(response, searchKeyword)) {
            $("#pagination-div").show();
            $("#table-body").empty();
            animateRows(response, searchKeyword);
            setTimeout(() => {
              $("#toastContainer").show();
              $("project-suggestion-button").click(function () {
                $("#project-suggestion").modal("show");
              });
            }, 5000);

          } else {
            var tableDiv = document.querySelector('.tableDiv');
            tableDiv.style.display = "none";
            $("#pagination-div").hide();
            showSearchResponseNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", "No records found for query.", false);
          }
        },
        error: function (error) {
          showSearchResponseNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", error.responseJSON.details?error.responseJSON.detail:"Error fetching data. Please try again later.", false);
          var tableDiv = document.querySelector('.tableDiv');
          tableDiv.style.display = "none";
          console.error("Error:", error);
        }
      });
    }

    function animateRows(htmlString, searchKeyword) {
      // Create a temporary container to hold the HTML content
      htmlString = removeChinese(htmlString);
      // console.log(htmlString);
      var tempContainer = document.createElement('div');
      var tableRow = document.createElement('tr');
      // Get the rows from the temporary container
      tempContainer.innerHTML = htmlString;
      var rows = tempContainer.querySelectorAll('tr');
      // if length of rows == 1 then display message = 0 records found for given query searchKeyword
      if (rows.length === 1) {
        return 1;
      }

      var tableBody = document.querySelector('#table-body');
      var tableDiv = document.querySelector('.tableDiv');
      tableDiv.style.display = "flex";
      tableRow.append(rows.innerHTML);
      rows.forEach((row) => {
        var rowIndex = 0;

        var userCol = row.childNodes[1];
        if (userCol.textContent !== 'Repository') {

          var userRepo = userCol.textContent;
          var userRepoButtonDiv = document.createElement('div');
          userRepoButtonDiv.setAttribute('class', 'btn-group');
          userRepoButtonDiv.setAttribute('role', 'group');
          userRepoButtonDiv.setAttribute('aria-label', 'Button group');
          // set style max-width: 200px
          userRepoButtonDiv.style.maxWidth = '100%';
          // Create the span
          var userRepoButton = document.createElement('span');
          userRepoButton.setAttribute('class', 'badge bg-info');
          userRepoButton.textContent = userRepo;

          userRepoButtonDiv.appendChild(userRepoButton);

          userCol.textContent = '';
          userCol.appendChild(userRepoButtonDiv);

          userRepoButton.addEventListener('click', function () {
            var username = userRepo.split('/')[0];
            console.log(username);
            $.ajax({
              type: "POST",
              url: '/user-details',
              dataType: "json",
              data: { username: username },
              success: function (response) {
                function showModal() {
                  clearTimeout(modalTimeout);

                  var modal = document.getElementById("user-modal");
                  modal.style.display = "block";

                  showUserInfo(response);
                }

                showModal();

              },
              error: function (error) {
                showSearchResponseNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", error.responseJSON.details?error.responseJSON.detail:"Error fetching data. Please try again later.", false);
                console.error("Error:", error);
              }
            });

          });
        }

        // handling the url button
        var urlCol = row.childNodes[6];
        if (urlCol.textContent !== 'Url') {
          var repo_url = urlCol.textContent;
          // Create the button div
          var urlButtonDiv = document.createElement('div');
          urlButtonDiv.setAttribute('class', 'btn-group');
          urlButtonDiv.setAttribute('role', 'group');
          urlButtonDiv.setAttribute('aria-label', 'Button group');

          // Create the span
          var urlButton = document.createElement('span');
          urlButton.setAttribute('class', 'badge bg-info');
          urlButton.textContent = 'Github-Link';

          // Append the button to the button div
          urlButtonDiv.appendChild(urlButton);

          urlCol.textContent = '';
          urlCol.appendChild(urlButtonDiv);

          row.childNodes[6] = urlCol;
          // ro
          urlButton.addEventListener('click', function () {
            window.open(repo_url, '_blank');
          });
          // row.childNodes[6].textContent = '';
        }

        /**
         * handling the the last readme button
         * 
        **/
        var last = row.lastElementChild;
        // if last is a tag create a button and add a tag to it
        if (last.tagName == 'TD') {
          // Print tag content
          var readmeLink = last.textContent;
          // console.log(readmeLink);
          // Create the div structure
          var buttonDiv = document.createElement('div');
          buttonDiv.setAttribute('class', 'btn-group');
          buttonDiv.setAttribute('role', 'group');
          buttonDiv.setAttribute('aria-label', 'Button group');

          // Create the button
          var button = document.createElement('button');
          button.setAttribute('type', 'button');
          button.setAttribute('class', 'btn btn-success');
          button.textContent = 'Readme';

          // Append the button to the button div
          buttonDiv.appendChild(button);

          // Replace the content of the last element with the button div
          last.textContent = '';
          last.appendChild(buttonDiv);
          row.lastElementChild = last;

          button.addEventListener('click', function () {
            // Get the readme content
            $.ajax({
              url: '/readme',
              type: 'POST',
              dataType: "html",
              data: {
                'url': readmeLink
              },
              success: function (response) {
                // Display the readme content in a modal
                showSearchResponseNotification("alert alert-dismissible alert-success", "alert alert-dismissible alert-danger", "Searching.....!", true);
                $('#show-readme').modal('show');
                // instead of adding directly text content render it as html
                $('#show-readme-body').html(response);
                // on click of download button download the project as zip
                $("#download-project").click(function () {
                  downloadProject(readmeLink);
                });
              },
              error: function (error) {
                // Display error message
                $('#show-readme').modal('show');
                $('#show-readme-body').html("<p>Error fetching readme. Please try again later.</p>");
                console.error("Error:", error);
              }
            });
          });
        }

        tableBody.append(row);

        // tableBody.appendChild(row);
        rowIndex++;
      })
    }

  </script>
  <script>
    var modalTimeout;

    function showModal() {
      clearTimeout(modalTimeout);

      var modal = document.getElementById("modal");
      modal.style.display = "block";

      showUserInfo();
    }

    function hideModal() {
      modalTimeout = setTimeout(function () {
        var modal = document.getElementById("user-modal");
        modal.style.display = "none";
      }, 500);
    }

    function showUserInfo(response) {
      var userInfo = {
        'photo': response.photo,
        'username': response.username,
        'name': response.name,
        'location': response.location,
        'public_repos': response.public_repos,
        'followers': response.followers,
        'following': response.following,
        'blog': response.blog,
        'twitter': response.twitter,
        'company': response.company
      };

      var userInfoElement = document.getElementById("user-info");
      var infoString = "";

      if (userInfo.photo) {
        infoString += '<div class="user-info-field"><label></label><img src="' + userInfo.photo + '" alt="User Photo"></div>';
      }
      if (userInfo.blog) {
        // create a link
        infoString += '<div class="user-info-field"><label>Blog:</label><span><a href="' + userInfo.blog + '" target="_blank">' + userInfo.blog + '</a></span></div>';
      }

      for (var key in userInfo) {
        if (userInfo.hasOwnProperty(key) && key !== 'photo') {
          if (userInfo[key]) {
            var label = key.charAt(0).toUpperCase() + key.slice(1); // Capitalize the label
            var value = userInfo[key];
            infoString += '<div class="user-info-field"><label>' + label + ':</label><span>' + value + '</span></div>';
          }
        }
      }

      if (infoString === "") {
        infoString = "No user information available.";
      }

      userInfoElement.innerHTML = infoString;
    }

  </script>

</body>

</html>