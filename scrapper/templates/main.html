<!DOCTYPE html>
<html>
<head>
  <title>User Registration and Login</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    form {
      max-width: 300px;
      margin: 0 auto;
    }
    input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
    }
    button {
      width: 100%;
      padding: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>User Registration and Login</h1>
  <form id="registrationForm">
    <h2>Register</h2>
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit">Register</button>
  </form>
  <form id="loginForm">
    <h2>Login</h2>
    <input type="email" id="loginEmail" placeholder="Email" required>
    <input type="password" id="loginPassword" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>

  <script src="https://www.gstatic.com/firebasejs/9.0.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.1/firebase-firestore.js"></script>
  <script>
    // Initialize Firebase
    const firebaseConfig = {
  apiKey: "AIzaSyAg0DfSIFhx3uvXKMhqKdsFX8RA9zLJgdI",
  authDomain: "savedata-4caee.firebaseapp.com",
  databaseURL: "https://savedata-4caee-default-rtdb.firebaseio.com",
  projectId: "savedata-4caee",
  storageBucket: "savedata-4caee.appspot.com",
  messagingSenderId: "175503428337",
  appId: "1:175503428337:web:8888828926d5ce2842f750",
  measurementId: "G-BKSV45WLRC"
};

    firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();

    // User Registration
    document.getElementById("registrationForm").addEventListener("submit", function(event) {
      event.preventDefault();
      var email = document.getElementById("email").value;
      var password = document.getElementById("password").value;

      firebase.auth().createUserWithEmailAndPassword(email, password)
        .then(function(user) {
          // Registration successful
          console.log("User registered:", user);
          storeUserCredentials(email, password);
        })
        .catch(function(error) {
          // Registration failed
          console.error("Registration failed:", error);
        });
    });

    // User Login
    document.getElementById("loginForm").addEventListener("submit", function(event) {
      event.preventDefault();
      var email = document.getElementById("loginEmail").value;
      var password = document.getElementById("loginPassword").value;

      firebase.auth().signInWithEmailAndPassword(email, password)
        .then(function(user) {
          // Login successful
          console.log("User logged in:", user);
        })
        .catch(function(error) {
          // Login failed
          console.error("Login failed:", error);
        });
    });

    // Firebase Authentication State Change Listener
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        // User is signed in
        console.log("User is signed in:", user);
      } else {
        // User is signed out
        console.log("User is signed out");
      }
    });

    // Store User Credentials in Google Cloud Datastore
    function storeUserCredentials(email, password) {
      // Your code to store user credentials in Google Cloud Datastore
      // using Google App Engine APIs
    }
  </script>
</body>
</html>
